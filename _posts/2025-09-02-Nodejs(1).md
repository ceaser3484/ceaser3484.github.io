---
defaults:
  # _posts
  - scope:
      path: ""
      type: posts
    values:
      layout: single
      author_profile: true
      read_time: true
      comments: true
      share: true
      related: true
    author: Ceaser
---
# Nodejs 정리 : 어떻게 서버를 만들지?
- NodeJs는 서버를 만들 수 있는 framework
- framework이기에 요구하는 형식이 있음. 
- 다음과 같이 간단히 서버를 만들어 구동시킬 수 있음
- 그런데 뭔가 웹페이지를 띄우는 것도 없고, 이상함. 
```javascript
// 나만의 서버를 만들어보기. 
// 서버를 만들 수 있는 http라는 모듈 가져오기

const http = require('http');

// 서버 생성
http.createServer((request, response) =>{
    // 요청에 따른 응답을 처리하는 함수. 
    // request : 요청에 따른 정보를 가진 객체
    // response : 응답을 처리할 수 있는 객체

    // console.log(`요청이 들어옴 : ${request}`);
    console.log(request.connection.remoteAddress);  // 요청한 주소값에 아이피를 가져오는 것. 

    // 한글 인코딩
    response.writeHead(200, { "Content-Type": "text/html;charset=utf-8" });
    // 환영합니다. 응답
    response.write("<h1>환영합니다.</h1>");


    // 응답 마무리
    response.end();
}).listen(3001); // listen(3001) : 내 컴퓨터의 3001번째 공간에서 서버를 실행하겠습니다. 
// http://localhost:3001
```
# Nodejs 정리 : 데이터를 html에서 가져오기 - get 방식
## get 방식? 
- get 방식은 url을 통해서 key-value 방식으로 정보를 보냄. 
- http://localhost:3000/?name=장창대&phone=01012341234
- 이런 식으로 주소로 그냥 올리기 때문에 노출이 되어있다는 큰 단점이 있음.

### html에서는 이렇게
```html
      <!-- form 태그 : 사용자가 입력한 데이터를 묶어서 서버로 보낼 수 있는 tag -->
    <!-- 
        action 속성 : 서버의 주소값을 지정한다.
        method 속성 : 통신할 때 어떤 방법으로 통신할것인지 지정

        name 속성 : form 태그를 통해 데이터를 보낼 때 해당 데이터의 key값 지정
    -->
<body>
    <!-- form 태그 : 사용자가 입력한 데이터를 묶어서 서버로 보낼 수 있는 tag -->
    <!-- 
        action 속성 : 서버의 주소값을 지정한다.
        method 속성 : 통신할 때 어떤 방법으로 통신할것인지 지정

        name 속성 : form 태그를 통해 데이터를 보낼 때 해당 데이터의 key값 지정
    -->
    <form action="http://localhost:3003" method="get">
        <input name="num1"> + <input name="num2">
        <button>확인</button>
    </form>
    
</body>
```
- 여기서 주의할 점은 action에 메세지를 받을 주소를 정확히 적어주어야 한다. 

### Node.js
```javascript
  const http = require("http");
  const url = require("url");

  http.createServer((request, response) => {
      // console.log(request.url);

    const query = url.parse(request.url, true).query;
    console.log(url.parse(request.url, true));
    let num1 = parseInt(query.num1);
    let num2 = parseInt(query.num2);

    console.log(`${num1} + ${num2} = ${num1 + num2}`);
    response.write(`${num1} + ${num2} = ${num1 + num2}`);
    response.end();
  }).listen(3003);
```
다음과 같이 url.parse로 request를 뜯어내고(?) object로 만들게 된다.
그러면 query에서 input시에 넘어온 name 값으로 전송된 정보를 가져오게 된다.
그리고 이 둘을 더해서 response로 넘겨주면 되는 코드. 